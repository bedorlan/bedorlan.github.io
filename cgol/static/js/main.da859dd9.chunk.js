(this.webpackJsonpcgol=this.webpackJsonpcgol||[]).push([[0],{16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var i=n(1),r=n.n(i),c=n(7),l=n.n(c),a=(n(16),n(8)),s=n(11),o=n(9),h=n(10),f=n(2),u=n(0);function v(){return Object(u.jsx)(g,{})}function g(){var t=Object(i.useState)((function(){return new j(300,200)})),e=Object(f.a)(t,2),n=e[0],r=e[1],c=Object(i.useState)(!1),l=Object(f.a)(c,2),a=l[0],s=l[1],o=Object(i.useState)(0),h=Object(f.a)(o,2),v=h[0],g=h[1],w=Object(i.useState)(0),x=Object(f.a)(w,2)[1],p=Object(i.useState)(""),O=Object(f.a)(p,2),y=O[0],m=O[1],S=Object(i.useState)([]),M=Object(f.a)(S,2),k=M[0],E=M[1],C=Object(i.useState)(null),R=Object(f.a)(C,2),F=R[0],D=R[1],P=Object(i.useRef)(null),U=Object(i.useState)(null),L=Object(f.a)(U,2),A=L[0],I=L[1];return Object(i.useEffect)((function(){Promise.all([fetch("lexicon.json").then((function(t){return t.json()})).then((function(t){(t=t.filter((function(t){return t.grid.length}))).forEach((function(t){return t.desc=t.desc.replace(/\s{2,}/g," ").trim()})),E(t)}))]).then((function(){return s(!0)}))}),[]),Object(i.useEffect)((function(){a&&setInterval((function(){r((function(t){return t.tick()})),x((function(t){return t+1}))}),62.5)}),[a]),Object(i.useEffect)((function(){setInterval((function(){x((function(t){return g(t),0}))}),1e3)}),[]),Object(u.jsxs)("div",{style:{display:"flex"},onMouseMove:function(t){I({x:t.nativeEvent.pageX,y:t.nativeEvent.pageY}),F&&H(t.nativeEvent.pageX,t.nativeEvent.pageY)},onKeyUp:function(t){" "===t.key&&D((function(t){if(!t)return t;var e=t.rotate90();return A&&H(A.x,A.y),e}))},onMouseUp:function(t){P.current.getContext("2d").clearRect(0,0,window.innerWidth,window.innerHeight),D(null)},children:[Object(u.jsx)("canvas",{ref:P,width:window.innerWidth,height:window.innerHeight,style:{position:"fixed",pointerEvents:"none"}}),Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(u.jsxs)("div",{children:["Drag & drop into the blue canvas to view pattern. Press spacebar while dragging to rotate. ",Object(u.jsx)("br",{}),Object(u.jsx)("a",{href:"https://github.com/bedorlan/cgol",children:"Source code"})," ",Object(u.jsx)("br",{}),"FPS=",v]}),Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",height:"600px"},children:[Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"25em"},children:[Object(u.jsx)("input",{style:{margin:"5px",width:"24em"},placeholder:"Filter here",value:y,onChange:function(t){return m(t.target.value)}}),Object(u.jsx)("div",{style:{display:"flex",flexDirection:"column",height:"35em",overflow:"scroll"},children:k.filter((function(t){return t.name.toLowerCase().includes(y.toLowerCase())})).map((function(t){return Object(u.jsx)("button",{type:"button",style:{cursor:"move",textAlign:"left"},title:t.desc,onMouseDown:function(e){D(j.fromLexicon(t.grid,1)),H(e.nativeEvent.pageX,e.nativeEvent.pageY)},children:t.name},t.name)}))})]}),Object(u.jsx)(d,{cellSize:3,grid:n,onMouseUp:function(t){if(F){var e=F;r((function(n){return n.copyFrom(e,t.x,t.y)})),P.current.getContext("2d").clearRect(0,0,window.innerWidth,window.innerHeight),D(null)}}})]})]})]});function H(t,e){D((function(n){if(!n)return n;var i=P.current.getContext("2d");return i.clearRect(0,0,window.innerWidth,window.innerHeight),i.fillStyle="#00ff00",b(i,t,e,n,3),n}))}}function d(t){var e=t.cellSize,n=t.grid,r=Object(i.useRef)(null);return Object(i.useEffect)((function(){var t=r.current.getContext("2d");t.fillStyle="#0a1243",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="#101d70",t.fillRect(Math.floor(t.canvas.width*(1/3)),0,1,t.canvas.height),t.fillRect(Math.floor(t.canvas.width*(2/3)),0,1,t.canvas.height),b(t,0,0,n,e)}),[n]),Object(u.jsx)("canvas",{width:"".concat(n.width*e,"px"),height:"".concat(n.length*e,"px"),onMouseUp:function(n){var i;n.stopPropagation(),null===(i=t.onMouseUp)||void 0===i||i.call(t,{x:Math.floor(n.nativeEvent.offsetX/e),y:Math.floor(n.nativeEvent.offsetY/e)})},ref:r})}var j=function(){function t(e,n){Object(o.a)(this,t),this.width=void 0,this.length=void 0,this.cells=void 0,this.width=e,this.length=n,this.cells=new Uint8Array(e*n).fill(0)}return Object(h.a)(t,[{key:"get",value:function(t,e){return this.cells[w(this.width,t,e)]}},{key:"getSafe",value:function(t,e){return t<0||t>=this.width||e<0||e>=this.length?0:this.get(t,e)||0}},{key:"set",value:function(t,e,n){this.cells[w(this.width,t,e)]=n}},{key:"tick",value:function(){var e=new t(this.width,this.length);e.cells=this.cells.slice();for(var n=0;n<this.length;++n)for(var i=0;i<this.width;++i){var r=this.getSafe(i-1,n-1),c=this.getSafe(i+0,n-1),l=this.getSafe(i+1,n-1),a=this.getSafe(i-1,n+0),s=this.getSafe(i+0,n+0),o=this.getSafe(i+1,n+0),h=this.getSafe(i-1,n+1),f=this.getSafe(i+0,n+1),u=this.getSafe(i+1,n+1),v=Math.sign(r)+Math.sign(c)+Math.sign(l)+Math.sign(a)+Math.sign(o)+Math.sign(h)+Math.sign(f)+Math.sign(u);if(s>0&&(v<2||v>3))e.set(i,n,0);else if(0===s&&3===v){var g=r+c+l+a+o+h+f+u<=4?1:2;e.set(i,n,g)}}return e}},{key:"tick2",value:function(){var e=new t(this.width,this.length);e.cells=this.cells.slice();for(var n=-1;n<this.length;n+=3)for(var i=-1;i<this.width;i+=3){for(var r=0,c=0;c<5;++c)for(var l=0;l<5;++l)r|=this.getSafe(i+c,n+l)<<5*l+c;for(var a=null[r],s=1;s<4;++s)for(var o=1;o<4;++o){var h=5*o+s,f=(a&1<<h)>>>h;e.set(i+s,n+o,f)}}return e}},{key:"copyFrom",value:function(e,n,i){var r=new t(this.width,this.length);r.cells=this.cells.slice();for(var c=0;c<e.length&&!(c+i>=this.length);++c)for(var l=0;l<e.width&&!(l+n>=this.width);++l)r.set(l+n,c+i,e.get(l,c));return r}},{key:"rotate90",value:function(){for(var e=new t(this.length,this.width),n=0;n<this.length;++n)for(var i=0;i<this.width;++i)e.set(this.length-1-n,i,this.get(i,n));return e}},{key:"changePlayer",value:function(e){for(var n=new t(this.width,this.length),i=0;i<this.length;++i)for(var r=0;r<this.width;++r)n.set(r,i,this.get(r,i)>0?e:0);return n}}],[{key:"fromRle",value:function(e){var n=e.replace(/#.*/g,"").trim().split("\n"),i=Object(s.a)(n),r=i[0],c=i.slice(1),l=r.match(/x\s*=\s*(\d+)\s*,\s*y\s*=\s*(\d+)/);if(!l)return null;var o,h=l.map(Number),u=Object(f.a)(h,3),v=u[1],g=u[2],d=new Uint8Array(v*g).fill(0),j=0,b=0,x=c.join("").replace("!",""),p=Object(a.a)(x.matchAll(/(\d*)([bo$])/g));try{for(p.s();!(o=p.n()).done;){var O=o.value,y=O[2],m=Number(O[1])||1;if("$"===y)b+=m,j=0;else for(var S="o"===y?1:0;m-- >0;)d[w(v,j++,b)]=S}}catch(k){p.e(k)}finally{p.f()}var M=new t(v,g);return M.cells=d,M}},{key:"fromLexicon",value:function(e,n){for(var i=e[0].length,r=e.length,c=new t(i,r),l=0;l<r;++l)for(var a=0;a<i;++a)c.cells[w(i,a,l)]="1"===e[l].charAt(a)?n:0;return c}}]),t}();function b(t,e,n,i,r){for(var c=["#000000","#b3b3ff","#ffb3b3","#00ff00"],l=0;l<i.length;++l)for(var a=0;a<i.width;++a){var s=i.get(a,l);s>0&&(t.fillStyle=c[s],t.fillRect(e+a*r,n+l*r,r,r))}}function w(t,e,n){return t*n+e}var x=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,c=e.getLCP,l=e.getTTFB;n(t),i(t),r(t),c(t),l(t)}))};l.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(v,{})}),document.getElementById("root")),x()}},[[18,1,2]]]);
//# sourceMappingURL=main.da859dd9.chunk.js.map